<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.koreait.vehicleservice.vehicle.VehicleMapper">
    <insert id="inVehicle">
        INSERT into car_sell_board
        (writeriuser,category,manufacturer,model,detail_model,car_number,price,color,fuel,distan_driven,gearbox,trading_area)
        values
        (1,#{category},#{manufacturer},#{model},#{detail_model},#{car_number},#{price},#{color},#{fuel},#{distan_driven},#{gearbox},#{trading_area})
    </insert>

    <insert id="inCarimg">
        insert into car_image
            (selliboard,mainimg,folderaddr)
        values
            (${selliboard},#{mainimg},#{folderaddr})
    </insert>

    <select id="selMaxiboard" resultType="int">
        SELECT MAX(selliboard) FROM car_sell_board;
    </select>

    <select id="vehicleList" resultType="VehicleVo">
        SELECT A.selliboard, A.writeriuser, A.category, A.manufacturer, A.model, A.detail_model
                , A.price, A.color, A.fuel, A.distan_driven, A.gearbox, A.trading_area
                , B.mainimg
        FROM car_sell_board A
        LEFT JOIN car_image B
        ON A.selliboard = B.selliboard
        AND A.category ={icategory}
        ORDER BY A.selliboard DESC
    </select>

</mapper>